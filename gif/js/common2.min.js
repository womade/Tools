var util={isEmpty:function(e){return null==(e=$.trim(e).replace(/\u200B/g,""))||"null"==e||void 0==e||"undefined"==e||""==e||0==e.length||!/[^(^\s*)|(\s*$)]/.test(e)},isNotEmpty:function(e){return!this.isEmpty(e)},isNum:function(e){return!this.isEmpty(e)&&!isNaN(e)},forbiddenSelect:function(){$(document).bind("selectstart",function(){return!1}),document.onselectstart=new Function("event.returnValue=false;"),$("*").css({"-moz-user-select":"none"})},autoSelect:function(){$(document).bind("selectstart",function(){return!0}),document.onselectstart=new Function("event.returnValue=true;"),$("*").css({"-moz-user-select":""})},ajax:function(e){var t=e;$.ajax({type:t.type||"post",url:t.url,data:t.data||{},traditional:!0,error:function(e){"function"==typeof t.error&&t.error(e)},success:function(e){"function"==typeof t.success&&t.success(e)}})},tip:function(e){var t=this,n=e||{},r=t.tip.tipEle,i=n.timeout||1.5,o="warning"!=n.type?"error"!=n.type?"#44b549":"#f51b33":"#eaa000";if(!r){var s=["<div style='display:none;width:700px;padding:10px 0;text-align:center;font-size:14px;color:#fff;position:fixed;top:0;left:50%;z-index:9999999;'>","<span></span>","</div>"].join("");t.tip.tipEle=r=$(s),$("body").append(r).fadeIn(300)}r.find("span").html(n.content||""),r.css({marginLeft:-350,background:o}).fadeIn(300),r.on("click",function(){r.fadeOut(300),"function"==typeof n.callback&&n.callback(),clearTimeout(t.tip.timer)}),clearTimeout(t.tip.timer),t.tip.timer=setTimeout(function(){r.fadeOut(300),"function"==typeof n.callback&&n.callback()},1e3*i)},getUrlParams:function(e){var t=(e=this.isEmpty(e)?location.href:e).split("?"),n=t[t.length-1].split("&"),r={};if(t.length>1)for(var i,o,s,a=0,l=n.length;a<l;a++)o=(i=n[a].split("="))[0],s=i[1],"string"==typeof o&&""!==o&&(r[o]?("string"==typeof r[o]&&(r[o]=[r[o]]),r[o].push(s)):r[o]=s);return r},setLs:function(e,t){if("object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&localStorage.setItem(n,e[n]);else localStorage.setItem(e,t);return this},getLs:function(e){return localStorage.getItem(e)},getCookie:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},setCookie:function(e,t,n){var r=new Date;return n=n||2592e6,r.setTime(r.getTime()+n),document.cookie=e+"="+escape(t)+";expires="+r.toGMTString(),this},base64:function(){_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.encode=function(e){var t,n,r,i,o,s,a,l="",h=0;for(e=_utf8_encode(e);h<e.length;)i=(t=e.charCodeAt(h++))>>2,o=(3&t)<<4|(n=e.charCodeAt(h++))>>4,s=(15&n)<<2|(r=e.charCodeAt(h++))>>6,a=63&r,isNaN(n)?s=a=64:isNaN(r)&&(a=64),l=l+_keyStr.charAt(i)+_keyStr.charAt(o)+_keyStr.charAt(s)+_keyStr.charAt(a);return l},this.decode=function(e){var t,n,r,i,o,s,a="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)t=_keyStr.indexOf(e.charAt(l++))<<2|(i=_keyStr.indexOf(e.charAt(l++)))>>4,n=(15&i)<<4|(o=_keyStr.indexOf(e.charAt(l++)))>>2,r=(3&o)<<6|(s=_keyStr.indexOf(e.charAt(l++))),a+=String.fromCharCode(t),64!=o&&(a+=String.fromCharCode(n)),64!=s&&(a+=String.fromCharCode(r));return a=_utf8_decode(a)},_utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},_utf8_decode=function(e){for(var t="",n=0,r=c1=c2=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return t}}},dialog={alert:function(e){var t=e||{};alert(t.content||"")},confirm:function(e){var t=e||{};confirm(t.content||"")?"function"==typeof t.callback&&t.callback(!0):"function"==typeof t.callback&&t.callback(!1)},prompt:function(e){var t=e||{},n=prompt(t.title||"",t._default||"");null!==n&&"function"==typeof t.callback&&t.callback(n)},tip:function(e){var t=this,n=e||{},r=t.tip.tipEle,i=n.timeout||1.5,o="warning"!=n.type?"error"!=n.type?"#44b549":"#f51b33":"#eaa000";if(!r){var s=["<div style='display:none;width:700px;padding:10px 0;text-align:center;font-size:14px;color:#fff;position:fixed;top:0;left:50%;z-index:9999999;'>","<span></span>","</div>"].join("");t.tip.tipEle=r=$(s),$("body").append(r).fadeIn(300)}r.find("span").html(n.content||""),r.css({marginLeft:-350,background:o}).fadeIn(300),r.on("click",function(){r.fadeOut(300),"function"==typeof n.callback&&n.callback(),clearTimeout(t.tip.timer)}),clearTimeout(t.tip.timer),t.tip.timer=setTimeout(function(){r.fadeOut(300),"function"==typeof n.callback&&n.callback()},1e3*i)}};$(function(){({init:function(){this.navConfig()},navConfig:function(){var e=location.pathname;$("#Z-nav").find('a[href="/gif/compress.html"]').closest("li").addClass("focus"),util.isNotEmpty(e)&&$("#Z-toolList").find('a[href="'+e+'"]').closest("li").addClass("focus")}}).init()});var bitsToNum=function(e){return e.reduce(function(e,t){return 2*e+t},0)},byteToBitArr=function(e){for(var t=[],n=7;n>=0;n--)t.push(!!(e&1<<n));return t},Stream=function(e){this.data=e,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return 255&e.charCodeAt(this.pos++)},this.readBytes=function(e){for(var t=[],n=0;n<e;n++)t.push(this.readByte());return t},this.read=function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.readByte());return t},this.readUnsigned=function(){var e=this.readBytes(2);return(e[1]<<8)+e[0]}},lzwDecode=function(e,t){for(var n,r,i=0,o=function(e){for(var n=0,r=0;r<e;r++)t.charCodeAt(i>>3)&1<<(7&i)&&(n|=1<<r),i++;return n},s=[],a=1<<e,l=a+1,h=e+1,f=[],c=function(){f=[],h=e+1;for(var t=0;t<a;t++)f[t]=[t];f[a]=[],f[l]=null};;)if(r=n,(n=o(h))!==a){if(n===l)break;if(n<f.length)r!==a&&f.push(f[r].concat(f[n][0]));else{if(n!==f.length)throw new Error("Invalid LZW code.");f.push(f[r].concat(f[r][0]))}s.push.apply(s,f[n]),f.length===1<<h&&h<12&&h++}else c();return s},parseGIF=function(e,t){t||(t={});var n=function(t){for(var n=[],r=0;r<t;r++)n.push(e.readBytes(3));return n},r=function(){var t,n;n="";do{t=e.readByte(),n+=e.read(t)}while(0!==t);return n},i=function(){var o={};switch(o.sentinel=e.readByte(),String.fromCharCode(o.sentinel)){case"!":o.type="ext",function(n){switch(n.label=e.readByte(),n.label){case 249:n.extType="gce",function(n){e.readByte();var r=byteToBitArr(e.readByte());n.reserved=r.splice(0,3),n.disposalMethod=bitsToNum(r.splice(0,3)),n.userInput=r.shift(),n.transparencyGiven=r.shift(),n.delayTime=e.readUnsigned(),n.transparencyIndex=e.readByte(),n.terminator=e.readByte(),t.gce&&t.gce(n)}(n);break;case 254:n.extType="com",function(e){e.comment=r(),t.com&&t.com(e)}(n);break;case 1:n.extType="pte",function(n){e.readByte(),n.ptHeader=e.readBytes(12),n.ptData=r(),t.pte&&t.pte(n)}(n);break;case 255:n.extType="app",function(n){switch(e.readByte(),n.identifier=e.read(8),n.authCode=e.read(3),n.identifier){case"NETSCAPE":!function(n){e.readByte(),n.unknown=e.readByte(),n.iterations=e.readUnsigned(),n.terminator=e.readByte(),t.app&&t.app.NETSCAPE&&t.app.NETSCAPE(n)}(n);break;default:!function(e){e.appData=r(),t.app&&t.app[e.identifier]&&t.app[e.identifier](e)}(n)}}(n);break;default:n.extType="unknown",function(e){e.data=r(),t.unknown&&t.unknown(e)}(n)}}(o);break;case",":o.type="img",function(i){i.leftPos=e.readUnsigned(),i.topPos=e.readUnsigned(),i.width=e.readUnsigned(),i.height=e.readUnsigned();var o=byteToBitArr(e.readByte());i.lctFlag=o.shift(),i.interlaced=o.shift(),i.sorted=o.shift(),i.reserved=o.splice(0,2),i.lctSize=bitsToNum(o.splice(0,3)),i.lctFlag&&(i.lct=n(1<<i.lctSize+1)),i.lzwMinCodeSize=e.readByte();var s=r();i.pixels=lzwDecode(i.lzwMinCodeSize,s),i.interlaced&&(i.pixels=function(e,t){for(var n=new Array(e.length),r=e.length/t,i=function(r,i){var o=e.slice(i*t,(i+1)*t);n.splice.apply(n,[r*t,t].concat(o))},o=[0,4,2,1],s=[8,8,4,2],a=0,l=0;l<4;l++)for(var h=o[l];h<r;h+=s[l])i(h,a),a++;return n}(i.pixels,i.width)),t.img&&t.img(i)}(o);break;case";":o.type="eof",t.eof&&t.eof(o);break;default:throw new Error("Unknown block: 0x"+o.sentinel.toString(16))}"eof"!==o.type&&setTimeout(i,0)};!function(){var r={};if(r.sig=e.read(3),r.ver=e.read(3),"GIF"!==r.sig)throw new Error("Not a GIF file.");r.width=e.readUnsigned(),r.height=e.readUnsigned();var i=byteToBitArr(e.readByte());r.gctFlag=i.shift(),r.colorRes=bitsToNum(i.splice(0,3)),r.sorted=i.shift(),r.gctSize=bitsToNum(i.splice(0,3)),r.bgColor=e.readByte(),r.pixelAspectRatio=e.readByte(),r.gctFlag&&(r.gct=n(1<<r.gctSize+1)),t.hdr&&t.hdr(r)}(),setTimeout(i,0)};"undefined"!=typeof exports&&(exports.Stream=Stream,exports.parseGIF=parseGIF);var playGIF=function(){var e,t=null,n=null,r=null,i=null,o=null,s=[],a=function(){o&&s.push({data:o.getImageData(0,0,e.width,e.height),delay:n})},l=function(){},h=function(e,t){return function(t){e(t)}},f={hdr:h(function(t){e=t,c.width=e.width,c.height=e.height}),gce:h(function(e){a(),t=null,n=null,i=r,r=null,o=null,t=e.transparencyGiven?e.transparencyIndex:null,n=e.delayTime,r=e.disposalMethod}),com:h(l),app:{NETSCAPE:h(l)},img:h(function(n){o||(o=c.getContext("2d"));var r=n.lctFlag?n.lct:e.gct,s=o.getImageData(n.leftPos,n.topPos,n.width,n.height);n.pixels.forEach(function(e,n){t!==e?(s.data[4*n+0]=r[e][0],s.data[4*n+1]=r[e][1],s.data[4*n+2]=r[e][2],s.data[4*n+3]=255):2!==i&&3!==i||(s.data[4*n+3]=0)}),o.putImageData(s,n.leftPos,n.topPos)}),eof:function(e){}},c=document.createElement("canvas");return{doParse:function(l,h){try{f.eof=function(){a(),h(e,s,c)},t=null,n=null,i=r,r=null,o=null,s=[],parseGIF(l,f)}catch(e){throw new Error("parse error."+e)}}}}();!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).GIF=e()}}(function(){return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return i(n||e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,a,l,h;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),r=(h=n.slice()).length,l=0;l<r;l++)h[l].apply(this,a);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,n){var r,i,o,s,a;a=navigator.userAgent.toLowerCase(),s=navigator.platform.toLowerCase(),o="ie"===(r=a.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0])[1]&&document.documentMode,(i={name:"version"===r[1]?r[3]:r[1],version:o||parseFloat("opera"===r[1]&&r[4]?r[4]:r[2]),platform:{name:a.match(/ip(?:ad|od|hone)/)?"ios":(a.match(/(?:webos|android)/)||s.match(/mac|win|linux/)||["other"])[0]}})[i.name]=!0,i[i.name+parseInt(i.version,10)]=!0,i.platform[i.platform.name]=!0,t.exports=i},{}],3:[function(e,t,n){var r,i,o,s={}.hasOwnProperty,a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},l=[].slice;r=e("events").EventEmitter,o=e("./browser.coffee"),i=function(e){function t(e){var t,r,i;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(e);for(r in n)i=n[r],null==(t=this.options)[r]&&(t[r]=i)}var n,i;return function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,r),n={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},i={delay:0,copy:!1},t.prototype.setOption=function(e,t){if(this.options[e]=t,null!=this._canvas&&("width"===e||"height"===e))return this._canvas[e]=t},t.prototype.setOptions=function(e){var t,n,r;n=[];for(t in e)s.call(e,t)&&(r=e[t],n.push(this.setOption(t,r)));return n},t.prototype.addFrame=function(e,t){var n,r;null==t&&(t={}),(n={}).transparent=this.options.transparent;for(r in i)n[r]=t[r]||i[r];if(null==this.options.width&&this.setOption("width",e.width),null==this.options.height&&this.setOption("height",e.height),"undefined"!=typeof ImageData&&null!==ImageData&&e instanceof ImageData)n.data=e.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&e instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&e instanceof WebGLRenderingContext)t.copy?n.data=this.getContextData(e):n.context=e;else{if(null==e.childNodes)throw new Error("Invalid image");t.copy?n.data=this.getImageData(e):n.image=e}return this.frames.push(n)},t.prototype.render=function(){var e,t,n,r;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var t,n,r;for(r=[],e=t=0,n=this.frames.length;0<=n?t<n:t>n;e=0<=n?++t:--t)r.push(null);return r}.call(this),n=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(e=t=0,r=n;0<=r?t<r:t>r;e=0<=r?++t:--t)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},t.prototype.abort=function(){for(var e;;){if(null==(e=this.activeWorkers.shift()))break;this.log("killing active worker"),e.terminate()}return this.running=!1,this.emit("abort")},t.prototype.spawnWorkers=function(){var e,t,n;return e=Math.min(this.options.workers,this.frames.length),function(){n=[];for(var r=t=this.freeWorkers.length;t<=e?r<e:r>e;t<=e?r++:r--)n.push(r);return n}.apply(this).forEach(function(e){return function(t){var n;return e.log("spawning worker "+t),n=new Worker(e.options.workerScript),n.onmessage=function(t){return e.activeWorkers.splice(e.activeWorkers.indexOf(n),1),e.freeWorkers.push(n),e.frameFinished(t.data)},e.freeWorkers.push(n)}}(this)),e},t.prototype.frameFinished=function(e){var t,n;if(this.log("frame "+e.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[e.index]=e,!0===this.options.globalPalette&&(this.options.globalPalette=e.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(t=1,n=this.freeWorkers.length;1<=n?t<n:t>n;1<=n?++t:--t)this.renderNextFrame();return a.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},t.prototype.finishRendering=function(){var e,t,n,r,i,o,s,a,l,h,f,c,u,p,d,g;for(a=0,i=0,l=(p=this.imageParts).length;i<l;i++)a+=((t=p[i]).data.length-1)*t.pageSize+t.cursor;for(a+=t.pageSize-t.cursor,this.log("rendering finished - filesize "+Math.round(a/1e3)+"kb"),e=new Uint8Array(a),c=0,o=0,h=(d=this.imageParts).length;o<h;o++)for(n=s=0,f=(g=(t=d[o]).data).length;s<f;n=++s)u=g[n],e.set(u,c),n===t.data.length-1?c+=t.cursor:c+=t.pageSize;return r=new Blob([e],{type:"image/gif"}),this.emit("finished",r,e)},t.prototype.renderNextFrame=function(){var e,t,n;if(0===this.freeWorkers.length)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return e=this.frames[this.nextFrame++],n=this.freeWorkers.shift(),t=this.getTask(e),this.log("starting frame "+(t.index+1)+" of "+this.frames.length),this.activeWorkers.push(n),n.postMessage(t)},t.prototype.getContextData=function(e){return e.getImageData(0,0,this.options.width,this.options.height).data},t.prototype.getImageData=function(e){var t;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),t=this._canvas.getContext("2d"),t.setFill=this.options.background,t.fillRect(0,0,this.options.width,this.options.height),t.drawImage(e,0,0),this.getContextData(t)},t.prototype.getTask=function(e){var t,n;if(t=this.frames.indexOf(e),n={index:t,last:t===this.frames.length-1,delay:e.delay,transparent:e.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===o.name},null!=e.data)n.data=e.data;else if(null!=e.context)n.data=this.getContextData(e.context);else{if(null==e.image)throw new Error("Invalid frame");n.data=this.getImageData(e.image)}return n},t.prototype.log=function(){var e;if(e=1<=arguments.length?l.call(arguments,0):[],this.options.debug)return console.log.apply(console,e)},t}(),t.exports=i},{"./browser.coffee":2,events:1}]},{},[3])(3)});